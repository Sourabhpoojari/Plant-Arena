<%- include("partials/header") %>
<form class="form-group" method="POST" action="/Landing/<%=product._id%>/checkout" >
<div class="container mt-5">
    <h3 class="ml-3 mt-5 pt-5">YOUR PRODUCTS</h3>  
    <div class="row">
      <div class="col-12">
          <table class="table table-image">
            <thead>
              <tr class="bg-secondary text-light">               
                <th scope="col">Product Image</th>
                <th scope="col">Product Name</th>
                <th scope="col">Price Per Item</th>
                <th scope="col">Quantity</th>
                <th scope="col">Amount</th>                
             </tr>
            </thead>
            <tbody>
             <tr>
                <td><img src="<%= product.productImage%>" class="checkoutImg" alt=""></td>
                <td><p><b><%=product.productName%></b></p></td>
                <td><p><b><%=product.price%></b></p></td>
                <td>
                    <div class="value-button" id="decrease" onclick="decreaseValue()" value="Decrease Value">-</div>
                    <input type="number" id="number" name="quantity" value="0"  min="1"  />
                    <div class="value-button" id="increase" onclick="increaseValue()" value="Increase Value">+</div>
                    
                  </td>
                <td>
                   <b id="amount"></b>
                </td>                       
              </tr>

              <tr class="bg-secondary text-light">
                <th scope="row"></th>
                <th scope="row"></th>
                <td></td>
                              
                <td><b>Total : </b></td>
                <td><b id="total"></b></td>
              </tr>

            </tbody>
          </table>   
      </div>
    </div>
  </div>


  <div class="container">
    <div class="row mt-5">
        <div class="col-lg-6">
            
                <div class="mt-5">
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-person" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M10 5a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm6 5c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                      </svg> <label for="name">Name</label>
               
                  <input type="text" name="name" class="form-control" value="<%= currentUser.username %>" required minlength="3" maxlength="32" >
                </div>
      
      
      
               <div class="mt-4">
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-envelope" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2zm13 2.383l-4.758 2.855L15 11.114v-5.73zm-.034 6.878L9.271 8.82 8 9.583 6.728 8.82l-5.694 3.44A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.739zM1 11.114l4.758-2.876L1 5.383v5.73z"/>
                  </svg> <label for="name"> Email</label>
             
                <input type="email" name="email" class="form-control" value="<%= currentUser.email %>" required minlength="7" maxlength="38">
               </div>

               <div class="mt-4">
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-telephone" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.568 17.568 0 0 0 4.168 6.608 17.569 17.569 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-2.307-1.794a.678.678 0 0 0-.58-.122l-2.19.547a1.745 1.745 0 0 1-1.657-.459L5.482 8.062a1.745 1.745 0 0 1-.46-1.657l.548-2.19a.678.678 0 0 0-.122-.58L3.654 1.328zM1.884.511a1.745 1.745 0 0 1 2.612.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511z"/>
                  </svg> Phone Number</label>
             
                <input type="number" class="form-control mt-2" name="phone" value="<%= currentUser.phone %>" required  >
               </div>
      
               <div class="mt-4">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-geo" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 1a3 3 0 1 0 0 6 3 3 0 0 0 0-6zM4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999zm2.493 8.574a.5.5 0 0 1-.411.575c-.712.118-1.28.295-1.655.493a1.319 1.319 0 0 0-.37.265.301.301 0 0 0-.057.09V14l.002.008a.147.147 0 0 0 .016.033.617.617 0 0 0 .145.15c.165.13.435.27.813.395.751.25 1.82.414 3.024.414s2.273-.163 3.024-.414c.378-.126.648-.265.813-.395a.619.619 0 0 0 .146-.15.148.148 0 0 0 .015-.033L12 14v-.004a.301.301 0 0 0-.057-.09 1.318 1.318 0 0 0-.37-.264c-.376-.198-.943-.375-1.655-.493a.5.5 0 1 1 .164-.986c.77.127 1.452.328 1.957.594C12.5 13 13 13.4 13 14c0 .426-.26.752-.544.977-.29.228-.68.413-1.116.558-.878.293-2.059.465-3.34.465-1.281 0-2.462-.172-3.34-.465-.436-.145-.826-.33-1.116-.558C3.26 14.752 3 14.426 3 14c0-.599.5-1 .961-1.243.505-.266 1.187-.467 1.957-.594a.5.5 0 0 1 .575.411z"/>
                  </svg> Pin Code</label>
             
                <input type="number"  class="form-control mt-2" name="pincode" required pattern="/^-?\d+\.?\d*$/" onKeyPress="if(this.value.length==10) return false;"  >
               </div>
             
               <div class="mt-4">
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-geo-alt" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M12.166 8.94C12.696 7.867 13 6.862 13 6A5 5 0 0 0 3 6c0 .862.305 1.867.834 2.94.524 1.062 1.234 2.12 1.96 3.07A31.481 31.481 0 0 0 8 14.58l.208-.22a31.493 31.493 0 0 0 1.998-2.35c.726-.95 1.436-2.008 1.96-3.07zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z"/>
                    <path fill-rule="evenodd" d="M8 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                  </svg> Delivery Address </label>
                <textarea  id="" rows="5" class="form-control mt-2" name="address" required maxlength="75" minlength="10"></textarea>
               </div>
              
              
        </div>
        <div class="col-lg-6 d-flex justify-content-center mt-5">
            <div>
                <img src="/loginleaves.jpg " style="width: 30%;" alt="">
                <span><h2>Plant <span class="text-success">Arena</span></h2></span>
                <div class="mt-5">
                    <i style="width: 10%;" class="text-muted">
               
                        Plant Arena
                        <br>
                        Plant arena address
                        <br>
                        574227
                        <br>
                        plantarena@gmail.com
                    </i>
                </div>
            </div>

        </div>
    </div>
</div>

  <div class="row">
      <div class="col-lg-4"></div>
      <div class="col-lg-4">
        
          <button class="btn btn-success btn-block mb-5 mt-3" type="submit" > <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-bag-check mr-5" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M8 1a2.5 2.5 0 0 0-2.5 2.5V4h5v-.5A2.5 2.5 0 0 0 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5zM2 5v9a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V5H2z"/>
            <path fill-rule="evenodd" d="M10.854 8.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708 0z"/>
          </svg> PROCEED TO CHECKOUT &#x20B9;<b id="ftotal" class="ml-2"></b></button>

      </div>
  </div>

</form>

  <script>
      function increaseValue() {
        var price=localStorage.getItem('price'); 
        var total=document.getElementById('total');
        var ftotal=document.getElementById('ftotal');
    price=JSON.parse(price);
    var number=document.getElementById('number').value;
    number=parseInt(number)+1;
    console.log(number);
    var amount=document.getElementById('amount');
    amount.innerHTML=price*number;
    total.innerHTML=price*number;
    ftotal.innerHTML=price*number;

  var value = parseInt(document.getElementById('number').value, 10);
  value = isNaN(value) ? 0 : value;
  value++;
  document.getElementById('number').value = value;
}

function decreaseValue() {
    var value = parseInt(document.getElementById('number').value, 10);
   if(value>1){
    var price=localStorage.getItem('price'); 
    var total=document.getElementById('total');
    var ftotal=document.getElementById('ftotal');
    price=JSON.parse(price);
    var number=document.getElementById('number').value;
    number=parseInt(number)-1;
    var amount=document.getElementById('amount');
    amount.innerHTML=price*number
    total.innerHTML=price*number
    ftotal.innerHTML=price*number

  
  value = isNaN(value) ? 0 : value;
  value <= 1 ? value = 1 : '';
  value--;

    document.getElementById('number').value = value;
  
   }
}
  </script>

<script>

onLoad();
  function onLoad() {
    var number=document.getElementById('number');
    var total=document.getElementById('total');
    var ftotal=document.getElementById('ftotal');
    var quantity=localStorage.getItem('quantity');
    var totalquant=localStorage.getItem('totalquant');
    number.max=totalquant;
    number.value=quantity;
    var amount=document.getElementById('amount');
    var price=localStorage.getItem('price');
    
    price=JSON.parse(price);
    quantity=JSON.parse(quantity);
    console.log(typeof(price));
   
    amount.innerHTML=price*quantity
    total.innerHTML=price*quantity
    ftotal.innerHTML=price*quantity
}

</script>
<script>
    $(document).ready(function(){
     
  
          $(".fixed-top").css("background-color", "#28A745"); 
    });
  </script>

  <script data-require="jquery@3.1.1" data-semver="3.1.1" src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <link rel="stylesheet" href="style.css" />

<%- include("partials/footer") %>
